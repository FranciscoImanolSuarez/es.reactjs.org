---
title: "React v17.0"
author: [gaearon,rachelnabors]
---
¡Hoy lanzamos React 17! Hemos escrito extensamente sobre el papel de la versión React 17 y los cambios que contiene en [the React 17 RC blog post](/blog/2020/08/10/react-v17-rc.html).Esta publicación es un breve resumen de la misma, por lo que si ya ha leído la publicación de RC, puede omitir esta.

## No hay nuevas funciones

La versión de React 17 es inusual porque no agrega ninguna característica nueva para desarrolladores. En cambio, esta versión se centra principalmente en **facilitar la actualización de React**.

En particular, React 17 es una versión "trampolín" la cual hace que sea más seguro incrustar un árbol administrado por una versión de React dentro de un árbol administrado por una versión diferente de React.

También facilita la integración de React en aplicaciones creadas con otras tecnologías.

## Actualizaciones graduales

**React 17 permite actualizaciones graduales de React.** Cuando actualiza de React 15 a 16 (o, en este caso, de React 16 a 17), generalmente actualizaría toda su aplicación a la vez. Esto funciona bien para muchas aplicaciones. Pero puede resultar cada vez más complicado si el código base se escribió hace unos años y no se mantiene de forma activa. Y aunque es posible usar dos versiones de React en la página, hasta React 17 esto ha sido frágil y ha causado problemas con los eventos.

Estamos solucionando muchos de esos problemas con React 17. Esto significa que **cuando React 18 y las próximas versiones futuras salgan, ahora tendrás más opciones**. La primera opción será actualizar toda la aplicación de una vez, como podría haber hecho antes. Pero también tendrá la opción de actualizar su aplicación pieza por pieza. Por ejemplo, puede decidir migrar la mayor parte de su aplicación a React 18, pero mantener un cuadro de diálogo de carga diferida o una subruta en React 17.

Esto no significa que usted *tenga que* hacer actualizaciones graduales. **Para la mayoría de las aplicaciones, actualizar todas a la vez sigue siendo la mejor solución.** Cargar dos versiones de React, incluso si una de ellas se carga de forma perezosa a pedido, todavía no es lo ideal.Sin embargo, para las aplicaciones más grandes que no se mantienen de forma activa, esta opción tiene sentido y React 17 permite que esas aplicaciones no se queden atrás.


Nosotros hemos preparado un [repositorio de ejemplo](https://github.com/reactjs/react-gradual-upgrade-demo/) demostrando cómo cargar de forma diferida una versión anterior de React si es necesario. Esta demostración utiliza Create React App, pero debería ser posible seguir un enfoque similar con cualquier otra herramienta. Damos la bienvenida a demostraciones de otras herramientas mediante un Pull Request.

>Nota
>
>**Hemos pospuesto otros cambios** hasta después de React 17. El objetivo de esta versión es permitir actualizaciones graduales. Si actualizar a React 17 fuera demasiado difícil, frustraría su propósito.

## Cambios en la delegación de eventos

Para habilitar las actualizaciones graduales, necesitamos realizar algunos cambios en el sistema de eventos React. React 17 es una versión importante porque estos cambios potencialmente se están rompiendo. Puede consultar nuestras [preguntas frecuentes sobre versiones](/docs/faq-versioning.html#breaking-changes) para conocer más sobre nuestro compromiso con la estabilidad.

En React 17, ya no se adjuntará controladores de eventos en el nivel de `document` por debajo. En su lugar, los adjuntará el contenedor DOM raíz en el que se representa su árbol de React

```js
const rootNode = document.getElementById('root');
ReactDOM.render(<App />, rootNode);
```

En React 16 y anteriores, Reaccionar haría `document.addEventListener()` para la mayoría de los eventos. React 17 llamará `rootNode.addEventListener()` por debajo.

![Un diagrama que muestra cómo React 17 adjunta eventos a las raíces en lugar de al documento](../images/blog/react-v17-rc/react_17_delegation.png)

Nosotros hemos confirmado que [numerosos](https://github.com/facebook/react/issues/7094) [problemas](https://github.com/facebook/react/issues/8693) [informados](https://github.com/facebook/react/issues/12518) [durante](https://github.com/facebook/react/issues/13451) [los](https://github.com/facebook/react/issues/4335) [años](https://github.com/facebook/react/issues/1691) [en](https://github.com/facebook/react/issues/285#issuecomment-253502585) [nuestro](https://github.com/facebook/react/pull/8117) [rastreador](https://github.com/facebook/react/issues/11530) [de problemas](https://github.com/facebook/react/issues/7128) relacionados con la integración de React con código que no es de React han sido corregidos por el nuevo comportamiento.


Si tiene problemas con este cambio, [aquí hay una forma común de resolverlos](/blog/2020/08/10/react-v17-rc.html#fixing-potential-issues).

## Otros cambios importantes

[La publicación del blog React 17 RC](/blog/2020/08/10/react-v17-rc.html#other-breaking-changes) describe el resto de los cambios importantes en React 17.

Solo hemos tenido que cambiar menos de veinte componentes de más de 100.000 en el código de producto de Facebook para trabajar con estos cambios, por lo que **esperamos que la mayoría de las aplicaciones puedan actualizarse a React 17 sin demasiados problemas**. Por favor [díganos](https://github.com/facebook/react/issues) si tienes problemas.

## Nueva transformación JSX

React 17 admite la [nueva transformación JSX](/blog/2020/09/22/introducing-the-new-jsx-transform.html). También hemos respaldado el soporte para React 16.14.0, React 15.7.0 y 0.14.10. Tenga en cuenta que es completamente opcional y no tiene que usarlo. La transformación JSX clásica seguirá funcionando y no hay planes para dejar de admitirla.

## React Native

React Native tiene un calendario de lanzamiento independiente. Actualmente esperamos que el soporte para React 17 aterrice en React Native 0.65, pero la versión exacta está sujeta a cambios. Como siempre, puede realizar un seguimiento de las discusiones de lanzamiento sobre los lanzamientos de React Native Community [seguimiento de problemas](https://github.com/react-native-community/releases).

## Instalación {#installation}

Para instalar React 17 con NPM, ejecute:

```bash
npm install react@17.0.0 react-dom@17.0.0
```

Para instalar React 17 con Yarn, ejecute:

```bash
yarn add react@17.0.0 react-dom@17.0.0
```

También proporcionamos compilaciones UMD de React a través de una CDN:

```html
<script crossorigin src="https://unpkg.com/react@17.0.0/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@17.0.0/umd/react-dom.production.min.js"></script>
```

Consulte la documentación para obtener [instrucciones de instalación detalladas](/docs/installation.html).

## Registros de Cambios {#changelog}

### React {#react}

*Agregar `react/jsx-runtime` y` react/jsx-dev-runtime` para la [nueva transformación JSX](https://babeljs.io/blog/2020/03/16/7.9.0#a-new-jsx-transform-11154-https-githubcom-babel-babel-pull-11154). ([@lunaruan](https://github.com/lunaruan) in [#18299](https://github.com/facebook/react/pull/18299))
* Cree pilas de componentes a partir de marcos de error nativos. ([@sebmarkbage](https://github.com/sebmarkbage) en [#18561](https://github.com/facebook/react/pull/18561))
* Permitir especificar `displayName` en el contexto para mejorar las pilas. ([@eps1lon](https://github.com/eps1lon) in [#18224](https://github.com/facebook/react/pull/18224))
* Evite que el `'use strict'` se filtre en los paquetes UMD. ([@koba04](https://github.com/koba04) en [#19614](https://github.com/facebook/react/pull/19614))
* Deja de usar `fb.me` para redireccionamientos. ([@cylim](https://github.com/cylim) en [#19598](https://github.com/facebook/react/pull/19598))

### React DOM {#react-dom}

* Delegate events to roots instead of `document`. ([@trueadm](https://github.com/trueadm) in [#18195](https://github.com/facebook/react/pull/18195) and [others](https://github.com/facebook/react/pulls?q=is%3Apr+author%3Atrueadm+modern+event+is%3Amerged))
* Clean up all effects before running any next effects. ([@bvaughn](https://github.com/bvaughn) in [#17947](https://github.com/facebook/react/pull/17947))
* Run `useEffect` cleanup functions asynchronously. ([@bvaughn](https://github.com/bvaughn) in [#17925](https://github.com/facebook/react/pull/17925))
* Use browser `focusin` and `focusout` for `onFocus` and `onBlur`. ([@trueadm](https://github.com/trueadm) in [#19186](https://github.com/facebook/react/pull/19186))
* Make all `Capture` events use the browser capture phase. ([@trueadm](https://github.com/trueadm) in [#19221](https://github.com/facebook/react/pull/19221))
* Don't emulate bubbling of the `onScroll` event. ([@gaearon](https://github.com/gaearon) in [#19464](https://github.com/facebook/react/pull/19464))
* Throw if `forwardRef` or `memo` component returns `undefined`. ([@gaearon](https://github.com/gaearon) in [#19550](https://github.com/facebook/react/pull/19550))
* Remove event pooling. ([@trueadm](https://github.com/trueadm) in [#18969](https://github.com/facebook/react/pull/18969))
* Stop exposing internals that won’t be needed by React Native Web. ([@necolas](https://github.com/necolas) in [#18483](https://github.com/facebook/react/pull/18483))
* Attach all known event listeners when the root mounts. ([@gaearon](https://github.com/gaearon) in [#19659](https://github.com/facebook/react/pull/19659))
* Disable `console` in the second render pass of DEV mode double render. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18547](https://github.com/facebook/react/pull/18547))
* Deprecate the undocumented and misleading `ReactTestUtils.SimulateNative` API. ([@gaearon](https://github.com/gaearon) in [#13407](https://github.com/facebook/react/pull/13407))
* Rename private field names used in the internals. ([@gaearon](https://github.com/gaearon) in [#18377](https://github.com/facebook/react/pull/18377))
* Don't call User Timing API in development. ([@gaearon](https://github.com/gaearon) in [#18417](https://github.com/facebook/react/pull/18417))
* Disable console during the repeated render in Strict Mode. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18547](https://github.com/facebook/react/pull/18547))
* In Strict Mode, double-render components without Hooks too. ([@eps1lon](https://github.com/eps1lon) in [#18430](https://github.com/facebook/react/pull/18430))
* Allow calling `ReactDOM.flushSync` during lifecycle methods (but warn). ([@sebmarkbage](https://github.com/sebmarkbage) in [#18759](https://github.com/facebook/react/pull/18759))
* Add the `code` property to the keyboard event objects. ([@bl00mber](https://github.com/bl00mber) in [#18287](https://github.com/facebook/react/pull/18287))
* Add the `disableRemotePlayback` property for `video` elements. ([@tombrowndev](https://github.com/tombrowndev) in [#18619](https://github.com/facebook/react/pull/18619))
* Add the `enterKeyHint` property for `input` elements. ([@eps1lon](https://github.com/eps1lon) in [#18634](https://github.com/facebook/react/pull/18634))
* Warn when no `value` is provided to `<Context.Provider>`. ([@charlie1404](https://github.com/charlie1404) in [#19054](https://github.com/facebook/react/pull/19054))
* Warn when `memo` or `forwardRef` components return `undefined`. ([@bvaughn](https://github.com/bvaughn) in [#19550](https://github.com/facebook/react/pull/19550))
* Improve the error message for invalid updates. ([@JoviDeCroock](https://github.com/JoviDeCroock) in [#18316](https://github.com/facebook/react/pull/18316))
* Exclude forwardRef and memo from stack frames. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18559](https://github.com/facebook/react/pull/18559))
* Improve the error message when switching between controlled and uncontrolled inputs. ([@vcarl](https://github.com/vcarl) in [#17070](https://github.com/facebook/react/pull/17070))
* Keep `onTouchStart`, `onTouchMove`, and `onWheel` passive. ([@gaearon](https://github.com/gaearon) in [#19654](https://github.com/facebook/react/pull/19654))
* Fix `setState` hanging in development inside a closed iframe. ([@gaearon](https://github.com/gaearon) in [#19220](https://github.com/facebook/react/pull/19220))
* Fix rendering bailout for lazy components with `defaultProps`. ([@jddxf](https://github.com/jddxf) in [#18539](https://github.com/facebook/react/pull/18539))
* Fix a false positive warning when `dangerouslySetInnerHTML` is `undefined`. ([@eps1lon](https://github.com/eps1lon) in [#18676](https://github.com/facebook/react/pull/18676))
* Fix Test Utils with non-standard `require` implementation. ([@just-boris](https://github.com/just-boris) in [#18632](https://github.com/facebook/react/pull/18632))
* Fix `onBeforeInput` reporting an incorrect `event.type`. ([@eps1lon](https://github.com/eps1lon) in [#19561](https://github.com/facebook/react/pull/19561))
* Fix `event.relatedTarget` reported as `undefined` in Firefox. ([@claytercek](https://github.com/claytercek) in [#19607](https://github.com/facebook/react/pull/19607))
* Fix "unspecified error" in IE11. ([@hemakshis](https://github.com/hemakshis) in [#19664](https://github.com/facebook/react/pull/19664))
* Fix rendering into a shadow root. ([@Jack-Works](https://github.com/Jack-Works) in [#15894](https://github.com/facebook/react/pull/15894))
* Fix `movementX/Y` polyfill with capture events. ([@gaearon](https://github.com/gaearon) in [#19672](https://github.com/facebook/react/pull/19672))
* Use delegation for `onSubmit` and `onReset` events. ([@gaearon](https://github.com/gaearon) in [#19333](https://github.com/facebook/react/pull/19333))
* Improve memory usage. ([@trueadm](https://github.com/trueadm) in [#18970](https://github.com/facebook/react/pull/18970))

### React DOM Server {#react-dom-server}

* Make `useCallback` behavior consistent with `useMemo` for the server renderer. ([@alexmckenley](https://github.com/alexmckenley) in [#18783](https://github.com/facebook/react/pull/18783))
* Fix state leaking when a function component throws. ([@pmaccart](https://github.com/pmaccart) in [#19212](https://github.com/facebook/react/pull/19212))

### React Test Renderer {#react-test-renderer}

* Improve `findByType` error message. ([@henryqdineen](https://github.com/henryqdineen) in [#17439](https://github.com/facebook/react/pull/17439))

### Concurrent Mode (Experimental) {#concurrent-mode-experimental}

* Revamp the priority batching heuristics. ([@acdlite](https://github.com/acdlite) in [#18796](https://github.com/facebook/react/pull/18796))
* Add the `unstable_` prefix before the experimental APIs. ([@acdlite](https://github.com/acdlite) in [#18825](https://github.com/facebook/react/pull/18825))
* Remove `unstable_discreteUpdates` and `unstable_flushDiscreteUpdates`. ([@trueadm](https://github.com/trueadm) in [#18825](https://github.com/facebook/react/pull/18825))
* Remove the `timeoutMs` argument. ([@acdlite](https://github.com/acdlite) in [#19703](https://github.com/facebook/react/pull/19703))
* Disable `<div hidden />` prerendering in favor of a different future API. ([@acdlite](https://github.com/acdlite) in [#18917](https://github.com/facebook/react/pull/18917))
* Add `unstable_expectedLoadTime` to Suspense for CPU-bound trees. ([@acdlite](https://github.com/acdlite) in [#19936](https://github.com/facebook/react/pull/19936))
* Add an experimental `unstable_useOpaqueIdentifier` Hook. ([@lunaruan](https://github.com/lunaruan) in [#17322](https://github.com/facebook/react/pull/17322))
* Add an experimental `unstable_startTransition` API. ([@rickhanlonii](https://github.com/rickhanlonii) in [#19696](https://github.com/facebook/react/pull/19696))
* Using `act` in the test renderer no longer flushes Suspense fallbacks. ([@acdlite](https://github.com/acdlite) in [#18596](https://github.com/facebook/react/pull/18596))
* Use global render timeout for CPU Suspense. ([@sebmarkbage](https://github.com/sebmarkbage) in [#19643](https://github.com/facebook/react/pull/19643))
* Clear the existing root content before mounting. ([@bvaughn](https://github.com/bvaughn) in [#18730](https://github.com/facebook/react/pull/18730))
* Fix a bug with error boundaries. ([@acdlite](https://github.com/acdlite) in [#18265](https://github.com/facebook/react/pull/18265))
* Fix a bug causing dropped updates in a suspended tree. ([@acdlite](https://github.com/acdlite) in [#18384](https://github.com/facebook/react/pull/18384) and [#18457](https://github.com/facebook/react/pull/18457))
* Fix a bug causing dropped render phase updates. ([@acdlite](https://github.com/acdlite) in [#18537](https://github.com/facebook/react/pull/18537))
* Fix a bug in SuspenseList. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18412](https://github.com/facebook/react/pull/18412))
* Fix a bug causing Suspense fallback to show too early. ([@acdlite](https://github.com/acdlite) in [#18411](https://github.com/facebook/react/pull/18411))
* Fix a bug with class components inside SuspenseList. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18448](https://github.com/facebook/react/pull/18448))
* Fix a bug with inputs that may cause updates to be dropped. ([@jddxf](https://github.com/jddxf) in [#18515](https://github.com/facebook/react/pull/18515) and [@acdlite](https://github.com/acdlite) in [#18535](https://github.com/facebook/react/pull/18535))
* Fix a bug causing Suspense fallback to get stuck.  ([@acdlite](https://github.com/acdlite) in [#18663](https://github.com/facebook/react/pull/18663))
* Don't cut off the tail of a SuspenseList if hydrating. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18854](https://github.com/facebook/react/pull/18854))
* Fix a bug in `useMutableSource` that may happen when `getSnapshot` changes. ([@bvaughn](https://github.com/bvaughn) in [#18297](https://github.com/facebook/react/pull/18297))
* Fix a tearing bug in `useMutableSource`. ([@bvaughn](https://github.com/bvaughn) in [#18912](https://github.com/facebook/react/pull/18912))
* Warn if calling setState outside of render but before commit. ([@sebmarkbage](https://github.com/sebmarkbage) in [#18838](https://github.com/facebook/react/pull/18838))
